---
description: PHPStan Level 9 static analysis compliance
alwaysApply: true
---

# PHPStan Guidelines

## Level 9 Compliance

- All code must pass **PHPStan Level 9**
- Type hints on all parameters, return types, and properties -- no untyped signatures
- No `@phpstan-ignore` unless documented with a justification comment
- Use `phpstan-assert`, `phpstan-param`, and `phpstan-return` PHPDoc tags when generics or complex types are needed

## Common Fixes

- Replace `mixed` with specific union types where possible
- Use `array<string, mixed>` instead of bare `array` in PHPDoc
- Add `@throws` annotations for methods that throw exceptions
- Use `assert()` or type narrowing instead of suppressing errors
